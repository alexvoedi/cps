import{i as T,bp as b,t as w}from"./index-cKfusqJ9.js";var ee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function te(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ie(e){if(e.__esModule)return e;var i=e.default;if(typeof i=="function"){var t=function n(){return this instanceof n?Reflect.construct(i,arguments,this.constructor):i.apply(this,arguments)};t.prototype=i.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}),t}function ne(){const e=T(b,null);return e===null&&w("use-message","No outer <n-message-provider /> founded. See prerequisite in https://www.naiveui.com/en-US/os-theme/components/message for more details. If you want to use `useMessage` outside setup, please check https://www.naiveui.com/zh-CN/os-theme/components/message#Q-&-A."),e}function p(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function O(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,i,t){return i&&O(e.prototype,i),e}function I(e){return+e.replace(/px/,"")}function R(e){var i=window.devicePixelRatio,t=getComputedStyle(e),n=I(t.getPropertyValue("width")),o=I(t.getPropertyValue("height"));e.setAttribute("width",(n*i).toString()),e.setAttribute("height",(o*i).toString())}function f(e,i){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=Math.random()*(i-e)+e;return Math.floor(n*Math.pow(10,t))/Math.pow(10,t)}function _(e){return e[f(0,e.length)]}var F=.00125,M=5e-4,D=9e-4,L=1e-5,x=6,z=80,B=.9,q=1.7,U=.2,k=.6,X=.03,W=.07,y=15,S=82,H=150,G=100,V=250,J=40,Y=["#fcf403","#62fc03","#f4fc03","#03e7fc","#03fca5","#a503fc","#fc03ad","#fc03c2"];function A(e){var i=1920;return Math.log(e)/Math.log(i)}var N=function(){function e(i){p(this,e);var t=i.initialPosition,n=i.direction,o=i.confettiRadius,s=i.confettiColors,a=i.emojis,h=i.emojiSize,u=i.canvasWidth,c=f(B,q,3),r=c*A(u);this.confettiSpeed={x:r,y:r},this.finalConfettiSpeedX=f(U,k,3),this.rotationSpeed=a.length?.01:f(X,W,3)*A(u),this.dragForceCoefficient=f(M,D,6),this.radius={x:o,y:o},this.initialRadius=o,this.rotationAngle=n==="left"?f(0,.2,3):f(-.2,0,3),this.emojiSize=h,this.emojiRotationAngle=f(0,2*Math.PI),this.radiusYUpdateDirection="down";var l=n==="left"?f(S,y)*Math.PI/180:f(-y,-S)*Math.PI/180;this.absCos=Math.abs(Math.cos(l)),this.absSin=Math.abs(Math.sin(l));var d=f(-H,0),m={x:t.x+(n==="left"?-d:d)*this.absCos,y:t.y-d*this.absSin};this.currentPosition=Object.assign({},m),this.initialPosition=Object.assign({},m),this.color=a.length?null:_(s),this.emoji=a.length?_(a):null,this.createdAt=new Date().getTime(),this.direction=n}return g(e,[{key:"draw",value:function(t){var n=this.currentPosition,o=this.radius,s=this.color,a=this.emoji,h=this.rotationAngle,u=this.emojiRotationAngle,c=this.emojiSize,r=window.devicePixelRatio;s?(t.fillStyle=s,t.beginPath(),t.ellipse(n.x*r,n.y*r,o.x*r,o.y*r,h,0,2*Math.PI),t.fill()):a&&(t.font="".concat(c,"px serif"),t.save(),t.translate(r*n.x,r*n.y),t.rotate(u),t.textAlign="center",t.fillText(a,0,0),t.restore())}},{key:"updatePosition",value:function(t,n){var o=this.confettiSpeed,s=this.dragForceCoefficient,a=this.finalConfettiSpeedX,h=this.radiusYUpdateDirection,u=this.rotationSpeed,c=this.createdAt,r=this.direction,l=n-c;if(o.x>a&&(this.confettiSpeed.x-=s*t),this.currentPosition.x+=o.x*(r==="left"?-this.absCos:this.absCos)*t,this.currentPosition.y=this.initialPosition.y-o.y*this.absSin*l+F*Math.pow(l,2)/2,this.rotationSpeed-=this.emoji?1e-4:L*t,this.rotationSpeed<0&&(this.rotationSpeed=0),this.emoji){this.emojiRotationAngle+=this.rotationSpeed*t%(2*Math.PI);return}h==="down"?(this.radius.y-=t*u,this.radius.y<=0&&(this.radius.y=0,this.radiusYUpdateDirection="up")):(this.radius.y+=t*u,this.radius.y>=this.initialRadius&&(this.radius.y=this.initialRadius,this.radiusYUpdateDirection="down"))}},{key:"getIsVisibleOnCanvas",value:function(t){return this.currentPosition.y<t+G}}]),e}();function $(){var e=document.createElement("canvas");return e.style.position="fixed",e.style.width="100%",e.style.height="100%",e.style.top="0",e.style.left="0",e.style.zIndex="1000",e.style.pointerEvents="none",document.body.appendChild(e),e}function K(e){var i=e.confettiRadius,t=i===void 0?x:i,n=e.confettiNumber,o=n===void 0?e.confettiesNumber||(e.emojis?J:V):n,s=e.confettiColors,a=s===void 0?Y:s,h=e.emojis,u=h===void 0?e.emojies||[]:h,c=e.emojiSize,r=c===void 0?z:c;return e.emojies&&console.error("emojies argument is deprecated, please use emojis instead"),e.confettiesNumber&&console.error("confettiesNumber argument is deprecated, please use confettiNumber instead"),{confettiRadius:t,confettiNumber:o,confettiColors:a,emojis:u,emojiSize:r}}var Q=function(){function e(i){var t=this;p(this,e),this.canvasContext=i,this.shapes=[],this.promise=new Promise(function(n){return t.resolvePromise=n})}return g(e,[{key:"getBatchCompletePromise",value:function(){return this.promise}},{key:"addShapes",value:function(){var t;(t=this.shapes).push.apply(t,arguments)}},{key:"complete",value:function(){var t;return this.shapes.length?!1:((t=this.resolvePromise)===null||t===void 0||t.call(this),!0)}},{key:"processShapes",value:function(t,n,o){var s=this,a=t.timeDelta,h=t.currentTime;this.shapes=this.shapes.filter(function(u){return u.updatePosition(a,h),u.draw(s.canvasContext),o?u.getIsVisibleOnCanvas(n):!0})}}]),e}(),oe=function(){function e(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};p(this,e),this.activeConfettiBatches=[],this.canvas=i.canvas||$(),this.canvasContext=this.canvas.getContext("2d"),this.requestAnimationFrameRequested=!1,this.lastUpdated=new Date().getTime(),this.iterationIndex=0,this.loop=this.loop.bind(this),requestAnimationFrame(this.loop)}return g(e,[{key:"loop",value:function(){this.requestAnimationFrameRequested=!1,R(this.canvas);var t=new Date().getTime(),n=t-this.lastUpdated,o=this.canvas.offsetHeight,s=this.iterationIndex%10===0;this.activeConfettiBatches=this.activeConfettiBatches.filter(function(a){return a.processShapes({timeDelta:n,currentTime:t},o,s),s?!a.complete():!0}),this.iterationIndex++,this.queueAnimationFrameIfNeeded(t)}},{key:"queueAnimationFrameIfNeeded",value:function(t){this.requestAnimationFrameRequested||this.activeConfettiBatches.length<1||(this.requestAnimationFrameRequested=!0,this.lastUpdated=t||new Date().getTime(),requestAnimationFrame(this.loop))}},{key:"addConfetti",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=K(t),o=n.confettiRadius,s=n.confettiNumber,a=n.confettiColors,h=n.emojis,u=n.emojiSize,c=this.canvas.getBoundingClientRect(),r=c.width,l=c.height,d=l*5/7,m={x:0,y:d},E={x:r,y:d},v=new Q(this.canvasContext),C=0;C<s/2;C++){var P=new N({initialPosition:m,direction:"right",confettiRadius:o,confettiColors:a,confettiNumber:s,emojis:h,emojiSize:u,canvasWidth:r}),j=new N({initialPosition:E,direction:"left",confettiRadius:o,confettiColors:a,confettiNumber:s,emojis:h,emojiSize:u,canvasWidth:r});v.addShapes(P,j)}return this.activeConfettiBatches.push(v),this.queueAnimationFrameIfNeeded(),v.getBatchCompletePromise()}},{key:"clearCanvas",value:function(){this.activeConfettiBatches=[]}},{key:"destroyCanvas",value:function(){this.canvas.remove()}}]),e}();export{oe as J,te as a,ee as c,ie as g,ne as u};
